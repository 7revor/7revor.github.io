{"remainingRequest":"/Users/7revor/WebstormProjects/vue_press/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/7revor/WebstormProjects/vue_press/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/7revor/WebstormProjects/vue_press/docs/Notes/goodsProps.md?vue&type=template&id=30f249eb&","dependencies":[{"path":"/Users/7revor/WebstormProjects/vue_press/docs/Notes/goodsProps.md","mtime":1556091747757},{"path":"/Users/7revor/WebstormProjects/vue_press/node_modules/cache-loader/dist/cjs.js","mtime":1553505755456},{"path":"/Users/7revor/WebstormProjects/vue_press/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1553505756301},{"path":"/Users/7revor/WebstormProjects/vue_press/node_modules/cache-loader/dist/cjs.js","mtime":1553505755456},{"path":"/Users/7revor/WebstormProjects/vue_press/node_modules/vue-loader/lib/index.js","mtime":1553505756301},{"path":"/Users/7revor/WebstormProjects/vue_press/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1553505767409}],"contextDependencies":[],"result":["\n<div class=\"content\"><h2 id=\"介绍\"><a class=\"header-anchor\" href=\"#介绍\" aria-hidden=\"true\">#</a> 介绍</h2>\n<p>淘宝不同的宝贝类目商品属性不同，他们在本质上分为两类：</p>\n<ul>\n<li>销售属性（sku）</li>\n<li>商品属性</li>\n</ul>\n<p>这里我们只讨论其中的商品属性。</p>\n<h2 id=\"属性\"><a class=\"header-anchor\" href=\"#属性\" aria-hidden=\"true\">#</a> 属性</h2>\n<p>通过<code>taobao.itemprops.get</code>获得</p>\n<p>入参：</p>\n<ul>\n<li><code>cid</code> 叶子类目ID</li>\n<li><code>pid</code> 属性id (取类目属性时，传pid，不用同时传PID和parent_pid)</li>\n<li><code>parent_pid</code>父属性ID</li>\n<li><code>child_path</code>类目子属性路径,由该子属性上层的类目属性和类目属性值组成,格式<code>pid:vid;pid:vid</code>取类目子属性需要传<code>child_path</code> <code>cid</code></li>\n</ul>\n<h3 id=\"普通字段\"><a class=\"header-anchor\" href=\"#普通字段\" aria-hidden=\"true\">#</a> 普通字段</h3>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>pid</code></td>\n<td>属性id</td>\n</tr>\n<tr>\n<td><code>parent_pid</code></td>\n<td>父属性ID</td>\n</tr>\n<tr>\n<td><code>name</code></td>\n<td>属性名</td>\n</tr>\n<tr>\n<td><code>is_key_prop</code></td>\n<td>是否关键属性</td>\n</tr>\n<tr>\n<td><code>is_sale_prop</code></td>\n<td>是否销售属性</td>\n</tr>\n<tr>\n<td><code>is_color_prop</code></td>\n<td>是否颜色属性</td>\n</tr>\n<tr>\n<td><code>is_enum_prop</code></td>\n<td>是否是可枚举属性</td>\n</tr>\n<tr>\n<td><code>is_input_prop</code></td>\n<td>在<code>is_enum_prop</code>是<code>true</code>的前提下，是否是卖家可以自行输入的属性（注：如果<code>is_enum_prop</code>返回<code>false</code>，该参数统一返回<code>false</code>）</td>\n</tr>\n<tr>\n<td><code>must</code></td>\n<td>是否为必选属性</td>\n</tr>\n<tr>\n<td><code>multi</code></td>\n<td>是否可以多选</td>\n</tr>\n<tr>\n<td><code>child_template</code></td>\n<td>子属性的模板</td>\n</tr>\n<tr>\n<td><code>prop_values</code></td>\n<td>子属性列表</td>\n</tr>\n<tr>\n<td><code>is_material</code></td>\n<td>是否是材质属性项</td>\n</tr>\n<tr>\n<td><code>material_do</code></td>\n<td>材质属性信息</td>\n</tr>\n<tr>\n<td><code>is_taosir</code></td>\n<td>是否度量衡属性项</td>\n</tr>\n<tr>\n<td><code>taosir_do</code></td>\n<td>度量衡属性信息</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"子属性列表\"><a class=\"header-anchor\" href=\"#子属性列表\" aria-hidden=\"true\">#</a> 子属性列表</h3>\n<p><code>prop_values</code></p>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>pid</code></td>\n<td>属性 ID</td>\n</tr>\n<tr>\n<td><code>vid</code></td>\n<td>属性值ID</td>\n</tr>\n<tr>\n<td><code>name</code></td>\n<td>属性值</td>\n</tr>\n<tr>\n<td><code>is_parent</code></td>\n<td>是否为父类目属性</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"材质属性信息\"><a class=\"header-anchor\" href=\"#材质属性信息\" aria-hidden=\"true\">#</a> 材质属性信息</h3>\n<p><code>material_do</code></p>\n<ul>\n<li><code>materials</code> 材质值列表\n<ul>\n<li><code>name</code> 材质值名称</li>\n<li><code>need_content_number</code> 是否需要填写含量值</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"度量衡属性信息\"><a class=\"header-anchor\" href=\"#度量衡属性信息\" aria-hidden=\"true\">#</a> 度量衡属性信息</h3>\n<p><code>taosir_do</code></p>\n<ul>\n<li><code>precision</code> 数值小数点精度</li>\n<li><code>type</code> 时间类型：0表示非时间，1表示时间点，2表示时间范围</li>\n<li><code>std_unit_list</code> 卖家可选单位List&lt;单位id，单位名&gt;\n<ul>\n<li><code>attr_key</code> 属性键</li>\n<li><code>attr_value</code> 属性值</li>\n</ul>\n</li>\n<li><code>expr_el_list</code> 表达式元素list\n<ul>\n<li><code>text</code> 显示文本</li>\n<li><code>is_show_label</code> 是否只用于显示的文本元素</li>\n<li><code>is_label</code> 是否文本元素，用于显示也用于组装<code>value_name</code>，比如<code>:</code>操作符</li>\n<li><code>is_input</code> 是否输入框</li>\n<li><code>type</code>\n<ul>\n<li><code>0</code>类型为label元素，只用于展示，不用于组装<code>value_name</code></li>\n<li><code>1</code>类型为label元素，用于展示，用于组装<code>value_name</code></li>\n<li><code>2</code>类型为输入狂元素，主要用于卖家输入数据. 卖家填写完后需要重新设置该元素的文本数据；</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"属性组装\"><a class=\"header-anchor\" href=\"#属性组装\" aria-hidden=\"true\">#</a> 属性组装</h2>\n<p>首先过滤掉销售属性 <code>is_sale_prop===false</code></p>\n<p>初始化一个默认商品，需要组装三个字段</p>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code>item<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n  props<span class=\"token punctuation\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  input_pids<span class=\"token punctuation\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  input_str<span class=\"token punctuation\">:</span><span class=\"token string\">''</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><h3 id=\"枚举属性\"><a class=\"header-anchor\" href=\"#枚举属性\" aria-hidden=\"true\">#</a> 枚举属性</h3>\n<p><code>is_enum_prop===true</code></p>\n<p><code>is_input_prop===false</code></p>\n<p><code>prop_values!==null</code></p>\n<p>枚举属性的处理相对简单，遍历<code>prop_values</code>列表，将用户选择值拼入商品<code>props</code>字段，格式为<code>pid:vid</code></p>\n<ul>\n<li>用户选择<code>品牌:阿迪达斯</code>\n<ul>\n<li>品牌pid为<code>20000</code></li>\n<li>阿迪达斯子属性vid为<code>129808</code></li>\n</ul>\n</li>\n</ul>\n<p>那么此时商品属性为</p>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code>item<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n  props<span class=\"token punctuation\">:</span><span class=\"token string\">'20000:129808'</span><span class=\"token punctuation\">,</span>\n  input_pids<span class=\"token punctuation\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  input_str<span class=\"token punctuation\">:</span><span class=\"token string\">''</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><h3 id=\"自定义属性\"><a class=\"header-anchor\" href=\"#自定义属性\" aria-hidden=\"true\">#</a> 自定义属性</h3>\n<p><code>is_enum_prop===true</code></p>\n<p><code>is_input_prop===true</code></p>\n<p><code>prop_values===null</code></p>\n<p>将<code>pid</code>拼入<code>input_pids</code>，输入值拼入<code>input_str</code></p>\n<ul>\n<li>用户输入<code>货号:2019年夏款</code>\n<ul>\n<li>货号pid为<code>21394</code>\n那么此时商品属性为</li>\n</ul>\n</li>\n</ul>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code>item<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n  props<span class=\"token punctuation\">:</span><span class=\"token string\">'20000:129808'</span><span class=\"token punctuation\">,</span>\n  input_pids<span class=\"token punctuation\">:</span><span class=\"token string\">'21394'</span><span class=\"token punctuation\">,</span>\n  input_str<span class=\"token punctuation\">:</span><span class=\"token string\">'2019年夏款'</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><h3 id=\"枚举-自定义\"><a class=\"header-anchor\" href=\"#枚举-自定义\" aria-hidden=\"true\">#</a> 枚举&amp;&amp;自定义</h3>\n<p><code>is_enum_prop===true</code></p>\n<p><code>is_input_prop===true</code></p>\n<p><code>prop_values!==null</code></p>\n<p>有些属性即支持选择也支持自定义输入，此时根据用户操作做判断。如果是选择，那么按枚举属性处理，如果是输入，按自定义输入处理。</p>\n<h3 id=\"子属性\"><a class=\"header-anchor\" href=\"#子属性\" aria-hidden=\"true\">#</a> 子属性</h3>\n<h4 id=\"作为单独属性\"><a class=\"header-anchor\" href=\"#作为单独属性\" aria-hidden=\"true\">#</a> 作为单独属性</h4>\n<p>在枚举属性的前提下，如果用户选择的选项<code>is_parent</code>为<code>true</code>，那么该属性下还有附加子属性。</p>\n<p>用户选择<code>产地:中国大陆</code></p>\n<ul>\n<li>产地pid为<code>21299</code></li>\n<li>中国大陆的属性为</li>\n</ul>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code><span class=\"token punctuation\">{</span>\n  vid<span class=\"token punctuation\">:</span><span class=\"token number\">27772</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">:</span><span class=\"token string\">'中国大陆'</span><span class=\"token punctuation\">,</span>\n  is_parent<span class=\"token punctuation\">:</span><span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>此时，再次调用接口<code>taobao.itemprops.get</code>，入参添加<code>child_path</code>为<code>21299:27772</code> ，可获得产地子属性<code>省份</code>，子属性作为单独属性重新做处理。如果子属性选项依旧含有子属性，以此类推直至最末节点。</p>\n<p>用户最终选择<code>产地:中国大陆</code> <code>省份:山东省</code> <code>城市:临沂市</code></p>\n<ul>\n<li>产地pid为<code>21299</code> 中国大陆vid为<code>27772</code></li>\n<li>子属性省份pid为<code>24557</code> 山东省vid为<code>254221</code></li>\n<li>叶子属性城市pid为<code>31778</code> 临沂市vid为<code>47653222</code></li>\n</ul>\n<p>那么此时商品属性为</p>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code>item<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n  props<span class=\"token punctuation\">:</span><span class=\"token string\">'20000:129808,21299:27772,24557:254221,31778:47653222'</span><span class=\"token punctuation\">,</span>\n  input_pids<span class=\"token punctuation\">:</span><span class=\"token string\">'21394'</span><span class=\"token punctuation\">,</span>\n  input_str<span class=\"token punctuation\">:</span><span class=\"token string\">'2019年夏款'</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--></div>\n",null]}